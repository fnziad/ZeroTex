#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Â© 2025 Fahad Nadim Ziad â€” https://github.com/fnziad

# Prevent pushes with --no-verify
if [ -n "$HUSKY_SKIP_HOOKS" ]; then
  echo "âš ï¸  Skipping pre-push hooks (not recommended for main/develop)"
  exit 0
fi

echo "ğŸš€ Running pre-push checks..."

# Get current branch
BRANCH=$(git rev-parse --abbrev-ref HEAD)

if [ "$BRANCH" = "main" ] || [ "$BRANCH" = "master" ] || [ "$BRANCH" = "develop" ]; then
  echo "ğŸ”’ Pushing to protected branch: $BRANCH"
  echo "âœ“ Verifying all checks..."
  
  npm run lint || exit 1
  
  echo "âœ… Pre-push checks passed!"
fi
